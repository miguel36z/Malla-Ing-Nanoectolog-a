<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malla Curricular Ingeniería en Nanotecnología</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f8f9fa;
      margin: 0;
      padding: 2rem;
    }
    h1 {
      text-align: center;
      margin-bottom: 1rem;
      color: #2d3436;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 1rem;
      overflow-x: auto;
    }
    .semester {
      background: #dfe6e9;
      border-radius: 10px;
      padding: 1rem;
      min-width: 220px;
    }
    .semester h2 {
      font-size: 1.1rem;
      text-align: center;
      margin-bottom: 0.5rem;
    }
    .subject {
      background: #ffffff;
      border-left: 5px solid #74b9ff;
      margin: 0.4rem 0;
      padding: 0.4rem;
      border-radius: 5px;
      cursor: pointer;
      position: relative; /* Necesario para tooltip */
      transition: background 0.2s ease;
    }
    .subject:hover {
      background: #f1f2f6;
    }
    .subject.completed {
      background-color: #55efc4;
      text-decoration: line-through;
    }
    .subject.locked {
      background-color: #ffeaa7;
      cursor: not-allowed;
    }
    .subject .tooltip {
      visibility: hidden;
      background-color: #2d3436;
      color: #fff;
      text-align: center;
      padding: 5px;
      border-radius: 6px;
      position: absolute;
      z-index: 10; /* Ahora aparece siempre encima */
      bottom: 110%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      transition: opacity 0.3s;
      white-space: normal;
      width: 200px;
    }
    .subject.locked:hover .tooltip {
      visibility: visible;
      opacity: 1;
    }
  </style>
</head>
<body>
  <h1>Malla Curricular - Ingeniería en Nanotecnología</h1>
  <div class="grid" id="malla"></div>

  <script>
    const mallaData = {
      "PRIMER SEMESTRE": [
        "Cálculo diferencial",
        "Geometría Analítica",
        "Fundamentos de la Química",
        "Introducción a la Nanotecnología",
        "Sistemas Bioinspirados",
        "Optativa CBD"
      ],
      "SEGUNDO SEMESTRE": [
        { name: "Algebra lineal", reqs: ["Geometría Analítica"] },
        { name: "Química inorgánica", reqs: ["Fundamentos de la Química"] },
        { name: "Calculo Integral", reqs: ["Cálculo diferencial"] },
        { name: "Fisica mecánica", reqs: ["Cálculo diferencial", "Geometría Analítica"] },
        { name: "Materiales de Ingeniería", reqs: ["Fundamentos de la Química"] },
        "Electiva I"
      ],
      "TERCER SEMESTRE": [
        "Humanismo, Cultura y Valores",
        { name: "Ecuaciones Diferenciales", reqs: ["Calculo Integral"] },
        { name: "Electricidad y Magnetismo", reqs: ["Fisica mecánica"] },
        { name: "Métodos Experimentales", reqs: ["Fisica mecánica"] },
        { name: "Técnicas de Caracterización de Materiales", reqs: ["Materiales de Ingeniería"] },
        "Química Orgánica",
        "Metodología de la investigación"
      ],
      "CUARTO SEMESTRE": [
        "Cristología",
        "Lengua y Cultura",
        { name: "Calculo Vectorial", reqs: ["Calculo Integral"] },
        { name: "Física Moderna", reqs: ["Electricidad y Magnetismo", "Ecuaciones Diferenciales"] },
        { name: "Nanotecnología I", reqs: ["Materiales de Ingeniería"] },
        { name: "Fisicoquímica", reqs: ["Fundamentos de la Química", "Calculo Integral"] }
      ],
      "QUINTO SEMESTRE": [
        { name: "Métodos Numéricos", reqs: ["Ecuaciones Diferenciales"] },
        { name: "Programación", reqs: ["Calculo Vectorial", "Ecuaciones Diferenciales"] },
        { name: "Termodinámica", reqs: ["Fisicoquímica", "Ecuaciones Diferenciales"] },
        { name: "Fenómenos de Transporte", reqs: ["Ecuaciones Diferenciales", "Calculo Vectorial"] },
        { name: "Nanotecnología II", reqs: ["Nanotecnología I", "Técnicas de Caracterización de Materiales"] },
        { name: "Técnicas de Caracterización de Nanomateriales", reqs: ["Técnicas de Caracterización de Materiales"] }
      ],
      "SEXTO SEMESTRE": [
        "Estadística y Diseño de Experimentos",
        { name: "Nanociencia", reqs: ["Física Moderna"] },
        { name: "Reología y Nano fluidos", reqs: ["Fenómenos de Transporte"] },
        { name: "Nanotecnología III", reqs: ["Nanotecnología II"] },
        { name: "Coloides y Química de Superficies", reqs: ["Termodinámica"] },
        "Electiva II"
      ],
      "SÉPTIMO SEMESTRE": [
        "Línea de Formación I",
        "Emprendimiento y Responsabilidad Social",
        "Economía",
        { name: "Núcleo de Integración I", reqs: ["Nanotecnología II", "Técnicas de Caracterización de Nanomateriales", "Nanociencia"] },
        { name: "Bionanotecnología", reqs: ["Sistemas Bioinspirados", "Nanotecnología I", "Química Orgánica"] },
        "Basic Writing Skills"
      ],
      "OCTAVO SEMESTRE": [
        "Línea de Formación II",
        "Ética General",
        { name: "Economía Internacional", reqs: ["Economía"] },
        { name: "Núcleo de Integración II", reqs: ["Núcleo de Integración I"] },
        "Gestión de proyectos",
        "Optativa CI 2"
      ],
      "NOVENO SEMESTRE": [
        "Línea de Formación III",
        { name: "Ética Profesional", reqs: ["Ética General"] },
        { name: "Gestión e Innovación en Nanotecnología", reqs: ["Economía Internacional", "Nanotecnología III"] },
        { name: "Núcleo de Integración III", reqs: ["Núcleo de Integración II"] },
        { name: "Contexto profesional", reqs: ["Núcleo de Integración II"] },
        "Optativa CI 3"
      ],
      "DÉCIMO SEMESTRE": [
        { name: "Práctica Profesional", reqs: ["Cálculo diferencial","Geometría Analítica","Fundamentos de la Química","Introducción a la Nanotecnología","Sistemas Bioinspirados","Optativa CBD","Algebra lineal","Química inorgánica","Calculo Integral","Fisica mecánica","Materiales de Ingeniería","Electiva I","Humanismo, Cultura y Valores","Ecuaciones Diferenciales","Electricidad y Magnetismo","Métodos Experimentales","Técnicas de Caracterización de Materiales","Química Orgánica","Metodología de la investigación","Cristología","Lengua y Cultura","Calculo Vectorial","Física Moderna","Nanotecnología I","Fisicoquímica","Métodos Numéricos","Programación","Termodinámica","Fenómenos de Transporte","Nanotecnología II","Técnicas de Caracterización de Nanomateriales","Estadística y Diseño de Experimentos","Nanociencia","Reología y Nano fluidos","Nanotecnología III","Coloides y Química de Superficies","Electiva II","Línea de Formación I","Emprendimiento y Responsabilidad Social","Economía","Núcleo de Integración I","Bionanotecnología","Basic Writing Skills","Línea de Formación II","Ética General","Economía Internacional","Núcleo de Integración II","Gestión de proyectos","Optativa CI 2","Línea de Formación III","Ética Profesional","Gestión e Innovación en Nanotecnología","Núcleo de Integración III","Contexto profesional","Optativa CI 3"] }
      ]
    };

    const estado = JSON.parse(localStorage.getItem('estadoMallaNano')) || {};

    function renderMalla() {
      const contenedor = document.getElementById('malla');
      contenedor.innerHTML = '';

      Object.entries(mallaData).forEach(([semestre, materias]) => {
        const col = document.createElement('div');
        col.className = 'semester';

        const titulo = document.createElement('h2');
        titulo.textContent = semestre;
        col.appendChild(titulo);

        materias.forEach(materia => {
          const name = typeof materia === 'string' ? materia : materia.name;
          const reqs = materia.reqs || [];

          const div = document.createElement('div');
          div.className = 'subject';
          div.textContent = name;

          const completada = estado[name];
          const requisitosCumplidos = reqs.every(r => estado[r]);

          if (completada) div.classList.add('completed');
          else if (!requisitosCumplidos && reqs.length) {
            div.classList.add('locked');

            const tooltip = document.createElement('span');
            tooltip.className = 'tooltip';
            tooltip.textContent = 'Requiere: ' + reqs.filter(r => !estado[r]).join(', ');
            div.appendChild(tooltip);
          }

          div.addEventListener('click', () => {
            if (!div.classList.contains('locked')) {
              estado[name] = !estado[name];
              localStorage.setItem('estadoMallaNano', JSON.stringify(estado));
              renderMalla();
            }
          });

          col.appendChild(div);
        });

        contenedor.appendChild(col);
      });
    }

    renderMalla();
  </script>
</body>
</html>
